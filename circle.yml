machine:
  services:
    - postgresql

  pre:
    # Create a new test database.
    - sudo -u postgres psql -p 5433 -c "create database sales_postgres;"

  environment:
    POSTGRES_URI: postgres://ubuntu:@localhost/sales_postgres

dependencies:
  cache_directories:
     - "~/.cache/"
  override:
    - pip install -U pip tox wheel
    # Just to fill up the cache (to speed up later builds)
    - pip install -q -r requirements.txt

test:
  override:
    - tox
    - pyenv local 2.7.11 3.6.2
